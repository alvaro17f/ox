name: releaser

on:
  push:
    branches: [main]

jobs:
  tag:
    uses: ./.github/workflows/tag.yml

  changelog:
    uses: ./.github/workflows/changelog.yml
    needs: [tag]
    if: needs.tag.outputs.new_version


  build:
    uses: ./.github/workflows/build.yml
    needs: [tag, changelog]
    if: needs.tag.outputs.new_version
    with:
      NAME: ox
